[gd_scene load_steps=13 format=2]

[ext_resource path="res://weapons/Weapon.tscn" type="PackedScene" id=1]
[ext_resource path="res://Player.gd" type="Script" id=2]
[ext_resource path="res://player/Camera2D.gd" type="Script" id=3]
[ext_resource path="res://player/Chain.tscn" type="PackedScene" id=4]
[ext_resource path="res://weapons/Bullet.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/sprites/32x32.png" type="Texture" id=6]
[ext_resource path="res://assets/sprites/rope.png" type="Texture" id=7]
[ext_resource path="res://WeaponMechanics.gd" type="Script" id=8]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 0.998139, 2.11467 )

[sub_resource type="PhysicsMaterial" id=2]

[sub_resource type="CapsuleShape2D" id=3]

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 18.1528, 6.02961 )

[node name="Player" type="KinematicBody2D" groups=[
"ChainGang",
"Players",
]]
position = Vector2( 2.89905, -3.43567 )
rotation = -0.000230981
collision_layer = 4
collision_mask = 3
collision/safe_margin = 0.05
script = ExtResource( 2 )
Bullet = ExtResource( 5 )
push = 20

[node name="WeaponMechanics" type="Node2D" parent="."]
script = ExtResource( 8 )

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( -4.3709, 4.91209 )
scale = Vector2( 1.46035, 2.24052 )
texture = ExtResource( 6 )
region_rect = Rect2( 11, 13, 18, 20 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2( -4.38814, 4.89539 )
rotation = 0.000126217
scale = Vector2( 23.308, 17 )
shape = SubResource( 1 )

[node name="Weapon" parent="." instance=ExtResource( 1 )]
position = Vector2( 18.4133, -0.000347614 )

[node name="Camera2D" type="Camera2D" parent="."]
current = true
limit_left = -10000
limit_top = -10000
limit_right = 10000
limit_bottom = 10000
limit_smoothed = true
smoothing_enabled = true
script = ExtResource( 3 )

[node name="RayCast2D" type="RayCast2D" parent="."]
enabled = true
cast_to = Vector2( 5000, 10 )
collide_with_areas = true

[node name="GrappleTimer" type="Timer" parent="."]
process_mode = 0
wait_time = 4.0

[node name="Chain" parent="." groups=[
"ChainGang",
] instance=ExtResource( 4 )]
show_behind_parent = true
position = Vector2( -4.6513, -1.20232 )
scale = Vector2( 1.36203, 1.23864 )

[node name="Wall_Raycasts" type="Node2D" parent="."]

[node name="Right" type="Node2D" parent="Wall_Raycasts"]

[node name="Wall_Detect_Right" type="RayCast2D" parent="Wall_Raycasts/Right"]
position = Vector2( 19.9671, -11.5308 )
rotation = -1.58225
enabled = true
cast_to = Vector2( 0, 30 )
collide_with_areas = true

[node name="Wall_Detect_Right2" type="RayCast2D" parent="Wall_Raycasts/Right"]
position = Vector2( 26.803, -109.59 )
rotation = -1.58225
enabled = true
cast_to = Vector2( 0, 30 )
collide_with_areas = true

[node name="Wall_Detect_Right3" type="RayCast2D" parent="Wall_Raycasts/Right"]
position = Vector2( 26.8036, -124.759 )
rotation = -1.58225
enabled = true
cast_to = Vector2( 0, 30 )
collide_with_areas = true

[node name="Left" type="Node2D" parent="Wall_Raycasts"]

[node name="Wall_Detect_Left" type="RayCast2D" parent="Wall_Raycasts/Left"]
position = Vector2( -30.316, -13.4256 )
rotation = 1.57469
enabled = true
cast_to = Vector2( 0, 30 )
collide_with_areas = true

[node name="Wall_Detect_Left2" type="RayCast2D" parent="Wall_Raycasts/Left"]
position = Vector2( -34.2587, -111.52 )
rotation = 1.57469
enabled = true
cast_to = Vector2( 0, 30 )
collide_with_areas = true

[node name="Wall_Detect_Left3" type="RayCast2D" parent="Wall_Raycasts/Left"]
position = Vector2( -35.6038, -127.045 )
rotation = 1.57469
enabled = true
cast_to = Vector2( 0, 30 )
collide_with_areas = true

[node name="Upper_Detect" type="RayCast2D" parent="Wall_Raycasts"]
position = Vector2( -4.11721, -30.9484 )
rotation = 3.14143
scale = Vector2( 1.00532, 0.102961 )
enabled = true
collide_with_areas = true

[node name="Whip" type="PinJoint2D" parent="."]
position = Vector2( -13.2539, 3.38521 )
node_a = NodePath("..")
node_b = NodePath("GrooveJoint2D/RigidBody2D")
bias = 0.9
softness = 1.0

[node name="GrooveJoint2D" type="GrooveJoint2D" parent="Whip"]
position = Vector2( 0.140658, -0.140596 )
node_a = NodePath("../..")
node_b = NodePath("RigidBody2D")
bias = 0.9
disable_collision = false
length = 1.0
initial_offset = 1.0

[node name="RigidBody2D" type="RigidBody2D" parent="Whip/GrooveJoint2D"]
position = Vector2( -5.14383, 14.0025 )
rotation = -0.413721
collision_layer = 32
collision_mask = 32
physics_material_override = SubResource( 2 )
contact_monitor = true
can_sleep = false

[node name="Sprite" type="Sprite" parent="Whip/GrooveJoint2D/RigidBody2D"]
position = Vector2( 3.70252, 2.46796 )
scale = Vector2( 0.438508, 0.558329 )
texture = ExtResource( 7 )

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Whip/GrooveJoint2D/RigidBody2D"]
position = Vector2( 3.47328, 2.00998 )
rotation = -1.13057
scale = Vector2( 1.63873, 1 )
shape = SubResource( 3 )

[node name="Whip_Contraint" type="RigidBody2D" parent="."]
visible = false
position = Vector2( -13.1131, 2.96335 )
collision_layer = 4
collision_mask = 32
mode = 3
mass = 0.0316327

[node name="CollisionShape2D" type="CollisionShape2D" parent="Whip_Contraint"]
visible = false
position = Vector2( 0.284856, -15.6097 )
shape = SubResource( 4 )

[node name="RayCast2D2" type="RayCast2D" parent="."]

[node name="WallJumpTimer" type="Timer" parent="."]
wait_time = 0.3

[node name="Blur" type="CanvasModulate" parent="."]
visible = false
color = Color( 0.984314, 0.0705882, 0.0705882, 1 )
[connection signal="timeout" from="GrappleTimer" to="." method="_on_GrappleTimer_timeout"]
[connection signal="timeout" from="WallJumpTimer" to="." method="_on_WallJumpTimer_timeout"]
